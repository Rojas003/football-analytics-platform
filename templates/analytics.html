{% extends "base.html" %}

{% block title %}Analytics Dashboard{% endblock %}

{% block content %}
<h2>Analytics Dashboard</h2>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
    <div style="background: #667eea; color: white; padding: 30px; border-radius: 10px; text-align: center;">
        <h3 style="font-size: 3em; margin: 0;">{{ total_players }}</h3>
        <p style="margin-top: 10px; font-size: 1.2em;">Total Players</p>
    </div>
    
    <div style="background: #764ba2; color: white; padding: 30px; border-radius: 10px; text-align: center;">
        <h3 style="font-size: 3em; margin: 0;">{{ total_events }}</h3>
        <p style="margin-top: 10px; font-size: 1.2em;">Life Events Tracked</p>
    </div>
    
    <div style="background: #f093fb; color: white; padding: 30px; border-radius: 10px; text-align: center;">
        <h3 style="font-size: 3em; margin: 0;">{{ total_stats }}</h3>
        <p style="margin-top: 10px; font-size: 1.2em;">Games Recorded</p>
    </div>
</div>

<h3 style="margin-top: 40px;">Players with Analytics Data</h3>

{% if players_with_data %}
    <p style="margin-bottom: 20px;">Click on a player to see detailed correlation analysis between life events and performance.</p>
    
    <table>
        <thead>
            <tr>
                <th>Player Name</th>
                <th>Team</th>
                <th>Position</th>
                <th>Games</th>
                <th>Life Events</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for player in players_with_data %}
            <tr>
                <td>{{ player.name }}</td>
                <td>{{ player.team }}</td>
                <td>{{ player.position }}</td>
                <td>{{ player.stats_count }}</td>
                <td>{{ player.events_count }}</td>
                <td>
                    <a href="/player_analytics/{{ player.id }}" class="btn">View Analytics</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px;">
        <p><strong>No analytics data available yet.</strong></p>
        <p>To see correlation analysis, players need both:</p>
        <ul style="margin-left: 40px; margin-top: 10px;">
            <li>Game statistics (at least 3 games)</li>
            <li>Life events recorded</li>
        </ul>
        <p style="margin-top: 15px;">Add players with stats and life events to start analyzing performance correlations!</p>
    </div>
{% endif %}

<div style="margin-top: 40px;">
    <a href="/" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}